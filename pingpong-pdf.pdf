
%PDF-1.6

1 0 obj
  <<
    /Pages 2 0 R
    /OpenAction 30 0 R
    /AcroForm <<
      /Fields [ 50 0 R 51 0 R ]
    >>
    /Type /Catalog
  >>
endobj


2 0 obj
  <<
    /Count 1
    /Kids [
      3 0 R
    ]
    /Type /Pages
  >>
endobj


3 0 obj
  <<
    /Annots 20 0 R
    /Contents 4 0 R
    /MediaBox [ 0 0 612 792 ]
    /Parent 2 0 R
    /Resources <<
      /Font << /F1 5 0 R >>
    >>
    /Type /Page
  >>
endobj


4 0 obj
  << >>
  stream
  endstream
endobj


5 0 obj
  <<
    /BaseFont /Helvetica
    /Encoding /WinAnsiEncoding
    /Subtype /Type1
    /Type /Font
  >>
endobj


20 0 obj
  [ 50 0 R 51 0 R ]
endobj


30 0 obj
  <<
    /JS 40 0 R
    /S /JavaScript
  >>
endobj


40 0 obj
  << >>
  stream
    const PDF_WIDTH  = 612;
    const PDF_HEIGHT = 792;
    const gameWidth  = 400;
    const gameHeight = 200;
    const ballSize   = 10;

    const TICK_INTERVAL = 50;
    const GAME_STEP_TIME = 100;
  

    let timeMs = 0;
    let lastUpdate = 0;
    let interval = 0;
    let ballX = PDF_WIDTH/2;
    let ballY = PDF_HEIGHT/2 + gameHeight/2;
    let xDir = 1;
    let yDir = 1;

    function setInterval(cb, ms) {
    	const evalStr = "(" + cb.toString() + ")();";
    	return app.setInterval(evalStr, ms);
    }

    function gameTick() {
    	timeMs += TICK_INTERVAL;
    	gameUpdate();
    }

    function gameUpdate() {
      if (timeMs >= GAME_STEP_TIME + lastUpdate) {
        moveBall(); 
        lastUpdate = timeMs;
    	}
    }

    function moveBall() {
      handleCollision();
      this.getField("Ball").hidden = true;
      this.getField("Ball").rect = [
        ballX, ballY, ballX + ballSize, ballY + ballSize
      ];
      this.getField("Ball").hidden = false; 
    }

    function handleCollision() {
      ballY += ballSize * yDir;
      ballX += ballSize * xDir;
      if (ballY + ballSize >= PDF_HEIGHT/2 + gameHeight) {
        yDir = -1;
      } 
      
      if (ballX + ballSize >= PDF_WIDTH/2 + gameWidth/2) {
        xDir = -1;
      }

      if (ballY <= PDF_HEIGHT/ 2) {
        yDir = 1;
      }

      if (ballX <= PDF_WIDTH/2 - gameWidth/2) {
        xDir = 1;
      }

    }


    interval = setInterval(gameTick, TICK_INTERVAL);

    function foo() {
      app.alert("Button Clicked In a PDF!");
    }
  endstream
endobj


% ###FIELDS###


50 0 obj
<<
  /FT /Btn
  /Ff 1
  /MK <<
    /BG [
      0.8 
    ]
    /BC [
      0 0 0
    ]
  >>
  /Border [ 0 0 1 ]
  /P 3 0 R
  /Rect [
    106 396 506 596 
  ]
  /Subtype /Widget
  /T (Game_World)
  /Type /Annot
>>
endobj

51 0 obj
<<
  /FT /Btn
  /Ff 1
  /MK <<
    /BG [
      0 
    ]
    /BC [
      0 0 0
    ]
  >>
  /Border [ 0 0 1 ]
  /P 3 0 R
  /Rect [
    306 496 316 506 
  ]
  /Subtype /Widget
  /T (Ball)
  /Type /Annot
>>
endobj




trailer
  <<
    /Root 1 0 R
  >>

%%EOF
